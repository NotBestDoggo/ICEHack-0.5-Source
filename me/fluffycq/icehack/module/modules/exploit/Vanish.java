//Deobfuscated with https://github.com/PetoPetko/Minecraft-Deobfuscator3000 using mappings "1.12 stable mappings"!

package me.fluffycq.icehack.module.modules.exploit;

import me.fluffycq.icehack.module.Category;
import me.fluffycq.icehack.module.Module;
import net.minecraft.entity.Entity;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketVehicleMove;

public class Vanish extends Module {
  public void onEnable() {
    if (mc.player.getRidingEntity() != null) {
      mc.renderGlobal.loadRenderers();
      this.riding = mc.player.getRidingEntity();
      mc.player.dismountRidingEntity();
      mc.world.removeEntity(this.riding);
    } else {
      disable();
    } 
  }
  
  public void onUpdate() {
    if (mc.player.getRidingEntity() != null)
      this.riding = null; 
    if (this.riding == null && mc.player.getRidingEntity() != null) {
      this.riding = mc.player.getRidingEntity();
      mc.player.dismountRidingEntity();
      mc.world.removeEntity(this.riding);
    } 
    if (this.riding != null) {
      this.riding.setPosition(mc.player.posX, mc.player.posY, mc.player.posZ);
      mc.player.connection.sendPacket((Packet)new CPacketVehicleMove(this.riding));
    } 
  }
  
  public Vanish() {
    super("Vanish", 0, Category.EXPLOITS);
  }
  
  public void onDisable() {
    if (this.riding != null) {
      this.riding.isDead = false;
      mc.world.loadedEntityList.add(this.riding);
      mc.player.startRiding(this.riding, true);
      this.riding = null;
    } 
  }
}
