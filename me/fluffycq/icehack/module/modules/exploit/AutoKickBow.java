//Deobfuscated with https://github.com/PetoPetko/Minecraft-Deobfuscator3000 using mappings "1.12 stable mappings"!

package me.fluffycq.icehack.module.modules.exploit;

import me.fluffycq.icehack.message.Messages;
import me.fluffycq.icehack.module.Category;
import me.fluffycq.icehack.module.Module;
import net.minecraft.item.ItemStack;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketHeldItemChange;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import net.minecraft.network.play.client.CPacketPlayerTryUseItem;
import net.minecraft.util.math.BlockPos;

public class AutoKickBow extends Module {
  public AutoKickBow() {
    super("AutoKickBow", 0, Category.EXPLOITS);
  }
  
  static {
  
  }
  
  public int findShulker() {
    byte b = -1;
    for (byte b1 = 0; b1 < 9; b1++) {
      ItemStack itemStack = (ItemStack)mc.player.inventory.mainInventory.get(b1);
      if (itemStack.getItem() instanceof net.minecraft.item.ItemShulkerBox)
        b = b1; 
    } 
    return b;
  }
  
  public void changeItem(int paramInt) {
    mc.player.connection.sendPacket((Packet)new CPacketHeldItemChange(paramInt));
    mc.player.inventory.currentItem = paramInt;
  }
  
  public void onUpdate() {
    if (mc.player.inventory.getCurrentItem().getItem() instanceof net.minecraft.item.ItemBow && mc.player.isHandActive() && mc.player.getItemInUseMaxCount() >= 25) {
      mc.player.connection.sendPacket((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.RELEASE_USE_ITEM, BlockPos.ORIGIN, mc.player.getHorizontalFacing()));
      mc.player.connection.sendPacket((Packet)new CPacketPlayerTryUseItem(mc.player.getActiveHand()));
      mc.player.stopActiveHand();
      if (findShulker() != -1) {
        changeItem(findShulker());
      } else {
        Messages.sendChatMessage("No shulker found in hotbar, not switching...");
        disable();
      } 
    } 
  }
}
